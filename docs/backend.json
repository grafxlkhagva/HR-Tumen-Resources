{
  "entities": {
    "Employee": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Ажилтан",
      "type": "object",
      "description": "Хүний нөөцийн систем дэх ажилтныг илэрхийлнэ.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Ажилтны давтагдашгүй танигч."
        },
        "firstName": {
          "type": "string",
          "description": "Ажилтны нэр."
        },
        "lastName": {
          "type": "string",
          "description": "Ажилтны овог."
        },
        "email": {
          "type": "string",
          "description": "Ажилтны имэйл хаяг.",
          "format": "email"
        },
        "phoneNumber": {
          "type": "string",
          "description": "Ажилтны утасны дугаар."
        },
        "jobTitle": {
          "type": "string",
          "description": "Ажилтны албан тушаал."
        },
        "department": {
          "type": "string",
          "description": "Ажилтны харьяалагдах хэлтэс."
        },
        "hireDate": {
          "type": "string",
          "description": "Ажилтныг ажилд авсан огноо.",
          "format": "date-time"
        },
        "terminationDate": {
          "type": "string",
          "description": "Ажилтныг ажлаас халсан огноо (хэрэв байгаа бол).",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "email",
        "jobTitle",
        "department",
        "hireDate"
      ]
    },
    "TimeOffRequest": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Чөлөөний хүсэлт",
      "type": "object",
      "description": "Ажилтны ирүүлсэн чөлөөний хүсэлтийг илэрхийлнэ.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Чөлөөний хүсэлтийн давтагдашгүй танигч."
        },
        "employeeId": {
          "type": "string",
          "description": "Ажилтантай холбогдох танигч. (Хамаарал: Ажилтан 1:N Чөлөөний хүсэлт)"
        },
        "startDate": {
          "type": "string",
          "description": "Чөлөө авах эхлэх огноо.",
          "format": "date-time"
        },
        "endDate": {
          "type": "string",
          "description": "Чөлөө авах дуусах огноо.",
          "format": "date-time"
        },
        "reason": {
          "type": "string",
          "description": "Чөлөө авах болсон шалтгаан."
        },
        "status": {
          "type": "string",
          "description": "Чөлөөний хүсэлтийн төлөв (жишээ нь, хүлээгдэж буй, зөвшөөрсөн, татгалзсан)."
        }
      },
      "required": [
        "id",
        "employeeId",
        "startDate",
        "endDate",
        "reason",
        "status"
      ]
    },
    "Document": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Баримт бичиг",
      "type": "object",
      "description": "Хүний нөөцийн баримт бичгийг илэрхийлнэ.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Баримт бичгийн давтагдашгүй танигч."
        },
        "title": {
          "type": "string",
          "description": "Баримт бичгийн гарчиг."
        },
        "description": {
          "type": "string",
          "description": "Баримт бичгийн тодорхойлолт."
        },
        "url": {
          "type": "string",
          "description": "Баримт бичгийн URL эсвэл зам.",
          "format": "uri"
        },
        "uploadDate": {
          "type": "string",
          "description": "Баримт бичгийг байршуулсан огноо.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "title",
        "description",
        "url",
        "uploadDate"
      ]
    },
    "OnboardingTask": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Шинэ ажилтны даалгавар",
      "type": "object",
      "description": "Шинэ ажилтны дадлагын шалгах хуудасны даалгаврыг илэрхийлнэ.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Дадлагын даалгаврын давтагдашгүй танигч."
        },
        "description": {
          "type": "string",
          "description": "Дадлагын даалгаврын тодорхойлолт."
        },
        "dueDate": {
          "type": "string",
          "description": "Даалгаврыг дуусгах хугацаа.",
          "format": "date-time"
        },
        "completed": {
          "type": "boolean",
          "description": "Даалгавар дууссан эсэхийг заана."
        },
        "employeeId": {
          "type": "string",
          "description": "Ажилтантай холбогдох танигч. (Хамаарал: Ажилтан 1:N Шинэ ажилтны даалгавар)"
        }
      },
      "required": [
        "id",
        "description",
        "dueDate",
        "completed",
        "employeeId"
      ]
    },
    "CompanyProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Компанийн мэдээлэл",
      "type": "object",
      "description": "Компанийн ерөнхий мэдээллийг хадгална.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Давтагдашгүй танигч."
        },
        "name": {
          "type": "string",
          "description": "Компанийн нэр."
        },
        "address": {
          "type": "string",
          "description": "Компанийн хаяг."
        },
        "phone": {
          "type": "string",
          "description": "Компанийн утасны дугаар."
        },
        "website": {
          "type": "string",
          "description": "Компанийн вэбсайт.",
          "format": "uri"
        },
        "logoUrl": {
          "type": "string",
          "description": "Компанийн логоны URL.",
          "format": "uri"
        }
      },
      "required": [
        "id",
        "name"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/employees/{employeeId}",
        "definition": {
          "entityName": "Employee",
          "schema": {
            "$ref": "#/backend/entities/Employee"
          },
          "description": "Ажилтны профайлын мэдээллийг хадгална.",
          "params": [
            {
              "name": "employeeId",
              "description": "Ажилтны давтагдашгүй танигч."
            }
          ]
        }
      },
      {
        "path": "/employees/{employeeId}/timeOffRequests/{timeOffRequestId}",
        "definition": {
          "entityName": "TimeOffRequest",
          "schema": {
            "$ref": "#/backend/entities/TimeOffRequest"
          },
          "description": "Ажилтантай холбоотой чөлөөний хүсэлтийг хадгална.",
          "params": [
            {
              "name": "employeeId",
              "description": "Ажилтны давтагдашгүй танигч."
            },
            {
              "name": "timeOffRequestId",
              "description": "Чөлөөний хүсэлтийн давтагдашгүй танигч."
            }
          ]
        }
      },
      {
        "path": "/employees/{employeeId}/onboardingTasks/{onboardingTaskId}",
        "definition": {
          "entityName": "OnboardingTask",
          "schema": {
            "$ref": "#/backend/entities/OnboardingTask"
          },
          "description": "Ажилтантай холбоотой дадлагын даалгавруудыг хадгална.",
          "params": [
            {
              "name": "employeeId",
              "description": "Ажилтны давтагдашгүй танигч."
            },
            {
              "name": "onboardingTaskId",
              "description": "Дадлагын даалгаврын давтагдашгүй танигч."
            }
          ]
        }
      },
      {
        "path": "/documents/{documentId}",
        "definition": {
          "entityName": "Document",
          "schema": {
            "$ref": "#/backend/entities/Document"
          },
          "description": "Хүний нөөцийн баримт бичгүүдийг хадгална.",
          "params": [
            {
              "name": "documentId",
              "description": "Баримт бичгийн давтагдашгүй танигч."
            }
          ]
        }
      },
      {
        "path": "/company/profile",
        "definition": {
          "entityName": "CompanyProfile",
          "schema": {
            "$ref": "#/backend/entities/CompanyProfile"
          },
          "description": "Компанийн үндсэн мэдээллийг хадгалах ганц баримт бичиг.",
          "params": []
        }
      }
    ],
    "reasoning": "Firestore өгөгдлийн бүтцийг Teal HR програмын онцлогт тохируулан, ажилтны удирдлага, чөлөөний хүсэлт, баримт бичгийн удирдлага, шинэ ажилтны дадлага зэрэгт төвлөрүүлэн боловсруулсан. Энэхүү бүтэц нь өгөгдлийг салгах замаар зөвшөөрлийн бие даасан байдлыг хангах, аюулгүй, өргөтгөх боломжтой үйл ажиллагааг идэвхжүүлэхэд чиглэгдсэн. Ажилтны профайлыг `/employees/{employeeId}` замд хадгалах ба чөлөөний хүсэлт, дадлагын даалгавар зэрэг холбогдох өгөгдлийг `/employees/{employeeId}/timeOffRequests/{timeOffRequestId}` болон `/employees/{employeeId}/onboardingTasks/{onboardingTaskId}` гэсэн дэд цуглуулгад хадгална. Энэхүү шаталсан бүтэц нь тодорхой ажилтантай холбоотой өгөгдлийг хялбархан асуух боломжийг олгож, өмчлөлд суурилсан аюулгүй байдлын дүрмийг хэрэгжүүлдэг. Баримт бичгүүдийг `/documents/{documentId}` гэсэн дээд түвшний цуглуулгад хадгална. Ингэж тусгаарласнаар баримт бичгийн хандалтыг бие даан удирдах боломжтой болно. Компанийн мэдээллийг `/company/profile` гэсэн замд хадгалснаар системд нэг л компанийн мэдээлэл байх боломжийг бүрдүүлнэ. Ажилтантай холбоотой өгөгдлийг замд суурилсан өмчлөл (`/employees/{employeeId}/...`) ашиглах нь өгөгдлийг ажилтны ID-тай шууд холбож, аюулгүй байдлын дүрмийг хялбаршуулдаг. Энэ бүтэц нь маш аюулгүй бөгөөд өгөгдлийн нууцлалыг хангана. Зөвшөөрлийн бие даасан байдлыг хангахын тулд `get()` дуудлага шаардлагагүй, учир нь бүх шаардлагатай зөвшөөрлийн шалгалтыг замд үндэслэн гүйцэтгэнэ.\n\nЭнэхүү бүтэц нь өгөгдлийг өмчлөлөөр нь ангилснаар QAPs (Дүрэм бол шүүлтүүр биш) -ийг дэмждэг. Жагсаалтын үйлдэл нь зөвхөн хэрэглэгчийн хандах эрхтэй зүйлсийг буцаана, учир нь тэдгээр нь зам нь өмчлөлийг заадаг цуглуулгад ангилагдсан байдаг. Энэ тохиолдолд гишүүнчлэлийн загварыг хатуу мөрддөггүй, учир нь бүх ажилчид өөрсдийн зам дахь өөрсдийн өгөгдөлд хандах эрхтэй гэж үздэг. Нөгөө талаас, баримт бичгүүдийг хэрэглэгч унших зөвшөөрөлтэй бол хандах боломжтой. Энэ бүтцэд ямар ч глобал үүрэг хэрэглэгдээгүй."
  }
}
